# Dabble - Daily Word Puzzle Game

> **Part of The Grid** - See root `CLAUDE.md` for shared patterns and monorepo guidelines.

## Project Overview

Dabble is a daily Scrabble-style word puzzle game where players receive a randomly-generated board with unique shapes and bonus squares, along with a set of letters. The goal is to score the highest possible Scrabble score using valid words.

- **Accent Color:** Amber (#f59e0b)
- **Dev Port:** 3001
- **Package Name:** `@grid-games/dabble`

## Quick Start

```bash
# From monorepo root
npx turbo dev --filter=@grid-games/dabble

# Or run all apps
npm run dev
```

Then open http://localhost:3001

## Game Rules

### Core Gameplay
1. Each day, all players receive the same puzzle (board + letters)
2. Players place tiles from their rack onto the board to form words
3. Words must connect like traditional Scrabble:
   - First word must cover the center star (★)
   - Subsequent words must connect to existing words
4. Only valid Scrabble dictionary words are accepted
5. Goal: Maximize your total score

### Board Features
- 9x9 grid (configurable in `src/constants/gameConfig.ts`)
- Dead spaces (dark cells where tiles cannot be placed)
- Bonus squares:
  - DL (Double Letter) - blue
  - TL (Triple Letter) - dark blue
  - DW (Double Word) - pink/rose
  - TW (Triple Word) - orange
  - ★ (Start) - amber, acts as Double Word

### Letter Rack
- Players receive 12 letters per puzzle (configurable)
- Letter distribution weighted by Scrabble frequencies
- Minimum 3 vowels guaranteed
- +50 bonus for using all letters

### Scoring
- Standard Scrabble letter point values (A=1, B=3, Q=10, etc.)
- Bonus squares multiply letter or word scores
- Bonuses only apply to newly placed tiles

## File Structure

```
src/
├── app/
│   ├── layout.tsx       # Root layout with metadata
│   ├── page.tsx         # Main game page (wraps Game in Suspense)
│   └── globals.css      # Theme CSS variables (amber accent)
├── components/
│   ├── Game.tsx         # Main game orchestrator (uses useSearchParams)
│   ├── GameBoard.tsx    # Board grid with droppable cells
│   ├── LetterRack.tsx   # Draggable letter tiles
│   ├── Tile.tsx         # Individual tile components
│   ├── WordList.tsx     # Submitted words display
│   └── ShareModal.tsx   # Share results modal
├── lib/
│   ├── puzzleGenerator.ts  # Daily puzzle generation (seedrandom)
│   ├── gameLogic.ts        # Word validation, scoring
│   └── dictionary.ts       # Trie-based word lookup
├── types/
│   └── index.ts         # TypeScript interfaces
├── constants/
│   └── gameConfig.ts    # Board size, letter values, etc.
└── hooks/               # Custom React hooks
```

## Key Configuration

`src/constants/gameConfig.ts`:
- `BOARD_SIZE`: Grid dimensions (default: 9)
- `PUZZLE_LETTER_COUNT`: Letters given to player (default: 12)
- `MIN_VOWELS`: Minimum vowels guaranteed (default: 3)
- `LETTER_POINTS`: Standard Scrabble letter values
- `LETTER_DISTRIBUTION`: Letter frequency in pool

## Implementation Notes

### Drag and Drop
Uses `@dnd-kit/core` for tile dragging:
- `PointerSensor` for mouse with 8px activation distance
- `TouchSensor` with 150ms hold delay (allows normal taps)

### Debug Mode
Add `?debug=true` to URL to enable:
- "New Puzzle" button for testing different boards
- Board archetype logging

### Puzzle Generation
- Uses `seedrandom` with date string as seed
- Board shape generated by "growing" dead spaces from corners/edges
- Connectivity ensured via BFS from center

### Word Validation Flow
1. Check tiles form a line (horizontal or vertical)
2. Check placement is contiguous (no gaps)
3. Check connection to existing words (or center star for first word)
4. Extract all formed words (main word + cross words)
5. Validate each word against dictionary
6. Calculate score with bonuses

## Dependencies

- `@dnd-kit/core` - Drag and drop
- `seedrandom` - Deterministic random generation
- Shared packages: `@grid-games/config`, `@grid-games/ui`, `@grid-games/shared`

## Future Enhancements

- [ ] Keyboard support for desktop
- [ ] Undo/redo functionality
- [ ] Visual feedback for invalid placements
- [ ] Animations for tile placement
- [ ] Statistics tracking (localStorage)
- [ ] Tutorial/how-to-play modal
